# ==========================================
# AbaqusGuard 配置文件示例
# 使用方法：复制此文件为 .env 并根据需要修改配置
# ==========================================

# ------------------------------------------
# 1. 监控目录配置
# ------------------------------------------
# 需要监控的文件夹路径，多个路径用逗号分隔
# 路径分隔符请使用正斜杠 / 或者双反斜杠 \\
# 示例: C:/Abaqus_Jobs, D:/Projects/Model1
WATCH_DIRS=C:/Users/YSY/Desktop/TES-2024-3

# ------------------------------------------
# 2. 通知服务配置 (可选)
# ------------------------------------------
# 飞书 Webhook URL (留空则不发送)
# 获取方式：飞书群组 -> 设置 -> 群机器人 -> 添加机器人 -> 自定义机器人
FEISHU_WEBHOOK_URL=https://open.feishu.cn/open-apis/bot/v2/hook/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# 企业微信 Webhook URL (留空则不发送)
# 获取方式：企业微信群 -> 添加群机器人
WECOM_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# 进度通知间隔（秒）
# 默认: 3600 (1小时)，防止频繁推送打扰
PROGRESS_NOTIFY_INTERVAL=3600

# ------------------------------------------
# 3. CSV 日志记录配置
# ------------------------------------------
# 是否启用 CSV 记录功能 (true/false)
ENABLE_CSV_LOG=true

# CSV 文件保存目录 (留空则默认保存在项目根目录)
CSV_PATH=

# CSV 文件名模板
# 支持时间格式化代码: %Y(年) %m(月) %d(日)
# 默认: abaqus_jobs_%Y%m.csv (按月分文件)
CSV_FILENAME=abaqus_jobs_%Y%m.csv

# CSV 更新间隔（秒）
# 设为 0 表示实时写入（不建议，可能影响性能），默认为 60 秒
CSV_UPDATE_INTERVAL=60

# CSV 记录覆盖模式
# none:    每次运行都新增一条记录 (默认)
# running: 覆盖同名且状态为"运行中"的记录 (推荐调试时使用)
# always:  总是覆盖同名作业的最后一条记录
CSV_OVERWRITE_MODE=running

# 保留历史记录数
# 仅在覆盖模式生效时用于查找历史记录，0 表示不限制
CSV_MAX_HISTORY=5

# ------------------------------------------
# 4. 高级系统配置
# ------------------------------------------
# 轮询间隔（秒）
# 检查文件夹变化的频率，建议 3-10 秒
POLL_INTERVAL=5

# 是否输出详细日志到控制台 (true/false)
VERBOSE=true

# 是否启用进程检测
# 开启后会检查 lck 文件对应的 Abaqus 进程是否存在
# 如果进程不存在但 lck 存在，将判定为"异常终止"
ENABLE_PROCESS_DETECTION=true

# .lck 文件宽限期（秒）
# 防止文件操作延迟导致的误判
LCK_GRACE_PERIOD=60

# .lck 删除后的结束确认期（秒）
# Abaqus 可能先删除 .lck，再稍后将最终状态写入 .sta
# 设为 0 表示禁用（恢复为“lck 一消失就立刻落定状态”的旧行为）
JOB_END_CONFIRM_PERIOD=60

# 通知去重窗口（秒）
# 避免同一事件在短时间内重复发送（例如：轮询抖动、进程重启后重复上报等）
NOTIFY_DEDUPE_TTL=3600

# Total Time 最小增量阈值（可选）
# 进度推送除了时间间隔外，还要求进度有变化；此阈值用于允许 Total Time 增量触发
# 设为 0 表示不启用，仅以 step/inc/total_time 快照变化判断
PROGRESS_NOTIFY_MIN_TOTAL_TIME_DELTA=0

# 通知渠道内部会基于上述配置做去重；飞书/企业微信之间不会互相影响（各自独立去重）
